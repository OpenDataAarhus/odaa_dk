<?php
/**
 * @file
 *
 * Serv dynmaic content based on hostname
 */

/**
 * Implements hook_menu().
 */
function odaa_domain_menu() {
  $items = array();

  $items['css'] = array(
    'title' => 'CSS',
    'page callback' => 'odaa_domain_css',
    'access arguments' => array('access content'),
    'type' => MENU_SUGGESTED_ITEM,
  );

  return $items;
}

/**
 * Serv theme css file.
 */
function odaa_domain_css() {
  $file = arg(1);
  $css_path = drupal_get_path('theme', $GLOBALS['theme_key']) . '/css/' . $file;
  if (file_exists($css_path)) {
    $output = file_get_contents($css_path);

    drupal_add_http_header('Content-Type', 'text/css');
    echo $output; exit();
  }
}

/**
 * Implements hook_form_system_site_information_settings_alter().
 *
 * Add field to filter content base on ckan organization.
 */
function odaa_domain_form_system_site_information_settings_alter(&$form, &$form_state, $form_id) {
  $form['site_information']['ckan_organization'] = array(
    '#type' => 'textfield',
    '#title' => t('CKAN Organization'),
    '#description' => t('The name/string used to filter on organizations in ckan (e.g. aarhus-kommune).'),
    '#default_value' => variable_get('ckan_organization', ''),
  );
}

