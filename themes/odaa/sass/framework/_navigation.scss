/**
 * Navigation
 *
 * @author magnify
 */


/* Main menu
   ========================================================================== */

.main-menu {
  float: left;
  font-size: $font-size-large;
  margin: 0;
  padding-left: 0;
  width: 100%;

  /* For now Drupal's menu_tree function adds the class "main-menu" so sub-menus
   * as well.
   */
  .main-menu {
    display: none;
  }

  li {
    /* Add the icon here so we can show it in other breakpoints */
    @extend .icon-angle-right;

    float: left;
    list-style: none;

    /* Make sure the icon is not displayed in this breakpoint */
    &:before {
      display: none;
    }
  }

  .first {
    .menu-item {
      margin-left: 0;
    }
  }

  .last {
    border-right: 0;

    .menu-item {
      margin-right: 0;
    }
  }

  .menu-item {
    @include border-radius($base-border-radius $base-border-radius 0 0);
    @include text-shadow(1px 1px 0 transparentize($black, .75));
    @include font-bold();

    background-color: transparentize($black, .35);
    color: $white;
    display: inline-block;
    margin-right: 15px;
    padding-top: 12px;
    padding-right: 18px;
    padding-bottom: 12px;
    padding-left: 18px;

    &:hover {
      background-color: transparentize($black, .25);
      color: $white;
      text-decoration: none;
    }

    &.active {
      background-color: $base-primary-color;
      color: $white;
      /* Required for pseudo arrow */
      position: relative;

      &:hover {
        background-color: darken($base-primary-color, 10%);

        &:before {
          @include pseudo-arrow(10px, darken($base-primary-color, 10%), bottom, center, $offset: 20px);
        }
      }

      &:before {
        @include pseudo-arrow(10px, $base-primary-color, bottom, center, $offset: 20px);
      }
    }
  }
}



/* Secondary menu
   ========================================================================== */
.secondary-menu {
  @include box-shadow(inset 0 5px 10px transparentize($black, .75));

  background-color: transparentize($black, .3);
  clear: both;
  float: left;
  margin: 0;
  padding-left: 0;
  width: 100%;

  li {
    float: left;
    list-style: none;
  }

  .menu-item {
    color: $white;
    display: inline-block;
    padding-top: 20px;
    padding-right: 20px;
    padding-bottom: 20px;
    padding-left: 20px;
  }
}



/* Sub menu
   ========================================================================== */

.sub-menu-wrapper {
  @include border-radius($base-border-radius);
  @include box-shadow(0 0 5px $gray-light);

  background-color: $base-secondary-color;
  border: 1px solid $gray;
  margin-top: $large-spacing;

  @include small-medium() {
    display: none;
  }
}

.sub-menu-title {
  @include background-image(linear-gradient(darken($base-secondary-color, 5%), $base-secondary-color));
  @include border-radius($base-border-radius $base-border-radius 0 0);

  border-bottom: 1px solid darken($base-secondary-color, 10%);
  font-size: $font-size-large;
  margin-bottom: 0;
  padding-top: 14px;
  padding-right: 10px;
  padding-bottom: 10px;
  padding-left: 10px;
}

.sub-menu {
  padding-left: 0;

  > li {

    /* Level 1 */
    .menu-item {
      @extend .icon-angle-right;

      border-bottom: 1px dashed darken($base-secondary-color, 10%);
      color: $font-color-primary;
      display: block;
      padding-top: 10px;
      padding-bottom: 8px;
      padding-left: 20px;

      &:before {
        float: left;
        font-family: $base-icon-library-font;
        font-size: $font-size-large;
        margin-right: 10px;
      }

      &.active {
        @include font-bold();

        color: $link-color;
      }

      &:hover {
        text-decoration: none;
        color: $link-color-hover;
      }
    }

    /* We want the border bottom to have full width so we have to increase
       padding left according to the nesting level. */

    /* Level 2 */
    ul {
      border-bottom: 1px dashed darken($base-secondary-color, 10%);

      .menu-item {
        padding-left: 40px;
      }

      /* Level 3 */
      ul {
        .menu-item {
          padding-left: 60px;
        }
      }
    }

    li {
      &:hover {
        background-color: darken($base-secondary-color, 8%);
      }

      li {
        &:hover {
          background-color: darken($base-secondary-color, 16%);
        }
      }
    }

    &:hover {
      background-color: darken($base-secondary-color, 4%);
    }

    &.last {
      .menu-item {
        border-bottom: 0;
      }
    }
  }
}
